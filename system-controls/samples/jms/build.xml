<?xml version="1.0" ?>


<project name="jms-control" basedir="." default="build">

    <import file="../../systemcontrols-imports.xml"/>

    <property name="samples.src.dir" value="${basedir}/src"/>
    <property name="samples.build.dir" value="${basedir}/build"/>
    <property name="samples.build.classes" value="${samples.build.dir}/classes"/>
    <property name="samples.build.beansrc" value="${samples.build.dir}/beansrc"/>
    <property name="samples.lib.dir" value="${basedir}/lib"/>

    <path id="build.classpath">
        <fileset file="${build.lib.dir}/beehive-jms-control.jar"/>
        <path refid="controls.dependency.path"/>
        <path refid="ejb.dependency.path"/>
        <path refid="xbean.dependency.path"/>
        <path refid="velocity.dependency.path"/>
    </path>

    <taskdef name="apt"
        classname="org.apache.beehive.controls.runtime.generator.AptTask"
        onerror="report"
        classpathref="build.classpath"/>


    

    <target name="clean" description="Deletes all generated files">
        <delete dir="${samples.build.dir}"/>
        <delete file="velocity.log"/>
    </target>


    <target name="dirs">
        <mkdir dir="${samples.build.classes}"/>
        <mkdir dir="${samples.build.beansrc}"/>
        <mkdir dir="${samples.lib.dir}"/>
    </target>


    <target name="build" depends="dirs" description="Build samples">

        <apt srcdir="${samples.src.dir}"
            destdir="${samples.build.classes}"
            gendir="${samples.build.beansrc}"
            excludes="**/Test*.java"
            classpathref="build.classpath"
            debug="on"
            compileByExtension="true"
            srcExtensions="*.java,*.jcx,*.jcs"
            target="1.5">
        </apt>

        <javac
            destdir="${samples.build.classes}"
            source="1.5"
            debug="on"
            classpathref="build.classpath"
            includes="**/Test*.java">
            <src path="${samples.src.dir}"/>
        </javac>

    </target>
</project>
