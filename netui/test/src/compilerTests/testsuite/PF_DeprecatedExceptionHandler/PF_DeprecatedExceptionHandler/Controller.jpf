package PF_DeprecatedExceptionHandler;

import org.apache.beehive.netui.pageflow.PageFlowController;
import org.apache.beehive.netui.pageflow.Forward;
import org.apache.beehive.netui.pageflow.ActionNotFoundException;
import org.apache.beehive.netui.pageflow.annotations.Jpf;
import org.apache.struts.action.ActionForm;

/**
 *******************************************************************************
 *
 * @desc: This PageFlow specifies a depricated version of the exceptionHandler method
 * signature.
 *
 * @result: This currently throws a warning, thus it appears it should generate a config file.
 *          and a warning.
 *
 ******************************************************************************/

    @Jpf.Controller(
        catches = {
            @Jpf.Catch(
                type = java.lang.Throwable.class,
                method = "exceptionHandler")
        })
public class Controller extends PageFlowController
   {
   FormOne  form1    = new FormOne();

    @Jpf.Action(
        forwards = {
            @Jpf.Forward(
                name = "gotoPg1",
                path = "Pg1.jsp")
        })
   public Forward begin()
      {
      System.out.println(">>> Jpf1.begin");
      return new Forward("gotoPg1");
      }

    @Jpf.Action(
        forwards = {
            @Jpf.Forward(
                name = "currentPage",
                path = "currentPage")
        })
   public Forward action1(FormOne inForm)
      {
      System.out.println(">>> Jpf1.action1");
      return new Forward("currentPage");
      }

    @Jpf.ExceptionHandler(
        forwards = {
            @Jpf.Forward(
                name = "current",
                navigateTo = Jpf.NavigateTo.currentPage)
        })
   public Forward exceptionHandler(Throwable e
                                   ,String actionName
                                   ,String message
                                   ,ActionForm inForm
                                   )
      {
      return new Forward("current");
      }

   /***************************************************************************
    *
    **************************************************************************/
   public static class FormOne extends ActionForm
       {
       private String field1 = "Default value";

       public void setField1(String inField1)
           {
           this.field1 = inField1;
           }
       public String getField1()
           {
           return this.field1;
           }
       }
   }
