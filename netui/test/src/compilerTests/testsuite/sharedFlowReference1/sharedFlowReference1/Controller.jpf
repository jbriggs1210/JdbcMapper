package sharedFlowReference1;

import javax.servlet.http.HttpSession;
import org.apache.beehive.netui.pageflow.Forward;
import org.apache.beehive.netui.pageflow.PageFlowController;
import org.apache.beehive.netui.pageflow.annotations.Jpf;

/*
 * This test verifies that:
 * It is an error to annotate a field as a shared flow without having declared the shared flow in the Controller annotation. 
 */

@Jpf.Controller(
    simpleActions={
        @Jpf.SimpleAction(name="begin", path="index.jsp")
    }
)
public class Controller 
    extends PageFlowController
{
    @Jpf.SharedFlowField(name="shared")
    private sharedFlowReference1.SharedFlow sfRef;


    @Jpf.Action(
    		forwards = {
    				@Jpf.Forward(name= "success", navigateTo=Jpf.NavigateTo.currentPage)
    		}
    )
    protected Forward getShared() {
    	Forward forward = new Forward("success");
    	return new Forward( "success", "message",  sfRef.getSharedMessage()); 
    }
    

    /**
     * Callback that is invoked when this controller instance is created.
     */
    protected void onCreate()
    {
    }

    /**
     * Callback that is invoked when this controller instance is destroyed.
     */
    protected void onDestroy(HttpSession session)
    {
    }
}
