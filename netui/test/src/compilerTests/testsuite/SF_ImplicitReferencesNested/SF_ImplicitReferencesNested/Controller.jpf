package SF_ImplicitReferencesNested;

import javax.servlet.http.HttpSession;
import org.apache.beehive.netui.pageflow.Forward;
import org.apache.beehive.netui.pageflow.PageFlowController;
import org.apache.beehive.netui.pageflow.annotations.Jpf;

/*
 * This test verifies that:
 *  Page flows cannot contain implicit references to shared flows (i.e. SharedFlows cannot be used without annotations)
 */

@Jpf.Controller(
    simpleActions={
        @Jpf.SimpleAction(name="begin", path="index.jsp"),
        @Jpf.SimpleAction(name="cancel", returnAction = "cancel")
    },
    nested=true
)
public class Controller 
    extends PageFlowController
{
    private SF_ImplicitReferencesNested.SharedFlow sfRef;


    @Jpf.Action(
    		forwards = {
    				@Jpf.Forward(name= "success", navigateTo=Jpf.NavigateTo.currentPage)
    		}
    )
    protected Forward getShared() {
    	Forward forward = new Forward("success");
    	return new Forward( "success", "message",  sfRef.getSharedMessage()); 
    }
    

    /**
     * Callback that is invoked when this controller instance is created.
     */
    protected void onCreate()
    {
    }

    /**
     * Callback that is invoked when this controller instance is destroyed.
     */
    protected void onDestroy(HttpSession session)
    {
    }
}
